# 配置说明

`config.env` 文件是 VCP ToolBox 的核心配置文件，您可以在此文件中配置所有服务和插件的参数。

**重要提示**:
- 修改此文件后，需要重启 VCP ToolBox 才能生效。
- 请勿将包含敏感信息（如 API 密钥）的 `config.env` 文件提交到公共代码库。

## 核心配置

这部分是 VCP ToolBox 运行所必需的基本配置。

- **`API_Key`**: 访问后端 AI 模型服务的 API 密钥。例如，如果您使用 OpenAI，这里应填写您的 `sk-xxxxxxxx` 密钥。
- **`API_URL`**: 后端 AI 模型服务的 API 地址。例如 `https://api.openai.com`。

**示例:**
```
API_Key=sk-xxxxxxxxxxxxxxxxxxxxxxxx
API_URL=https://api.openai.com
```

## 服务配置

这部分定义了 VCP ToolBox 服务本身如何运行和被访问。

- **`PORT`**: VCP 服务器的运行端口。默认为 `6005`。
- **`Key`**: 访问 VCP 聊天 API (`/v1/chat/completions`) 的密码，用于保护您的服务不被滥用。
- **`Image_Key`**: 访问 VCP 图片服务的密码。
- **`File_Key`**: 访问 VCP 插件生成文档服务的密码。
- **`VCP_Key`**: VCP 服务�� WebSocket 鉴权密钥，用于 VCP 管理面板和分布式服务器之间的实时通信。
- **`ApiRetries`**: 调用后端 AI 模型 API 失败时的重试次数。默认为 `3`。
- **`ApiRetryDelay`**: 每次重试之间的延迟时间（毫秒）。默认为 `200`。
- **`MaxVCPLoopStream`**: 流式输出时，VCP 工具调用的最大循环次数。默认为 `5`。
- **`MaxVCPLoopNonStream`**: 非流式输出时，VCP 工具调用的最大循环次数。默认为 `5`。

## 调试与开发

- **`DebugMode`**: 是否开启调试模式。设置为 `true` 会在控制台输出详细的调试信息。默认为 `false`。
- **`ShowVCP`**: 在非流式输出时，是否在返回结果中包含 VCP 的调用信息。默认为 `false`。

## 管理面板

- **`AdminUsername`**: 登录 VCP 管理后台的用户名。默认为 `admin`。
- **`AdminPassword`**: 登录 VCP 管理后台的密码。**请务必修改为强密码！**
- **`CALLBACK_BASE_URL`**: 服务器内回调地址，主要用于插件执行完异步任务后通知主程序。如果您在本地运行，`http://localhost:6005/plugin-callback` 通常是正确的。如果部署在服务器上，请将 `localhost` 替换为您的服务器公网 IP 或域名。

## 模型路由

- **`WhitelistImageModel`**: 图像生成模型的白名单。在此列出的模型 ID，请求将��接转发到后端 AI 服务。
- **`WhitelistEmbeddingModel`**: 嵌入模型的白名单。
- **`WhitelistEmbeddingModelMaxToken`**: 嵌入模型的最大 Token 数。
- **`WhitelistEmbeddingModelList`**: 嵌入模型的列表。

## RAG 数据库管理

这部分是关于向量数据库的配置参数，用于优化 RAG (Retrieval-Augmented Generation) 系统的性能。

- **`VECTORDB_CHANGE_THRESHOLD`**: 变更阈值。
- **`VECTORDB_MAX_MEMORY_MB`**: 最大内存占用（MB）。
- **`VECTORDB_CACHE_SIZE`**: 缓存大小。
- **`VECTORDB_CACHE_TTL_MS`**: 缓存存活时间（毫秒）。
- **`VECTORDB_RETRY_ATTEMPTS`**: 重试次数。
- **`VECTORDB_RETRY_BASE_DELAY_MS`**: 重试基础延迟（毫秒）。
- **`VECTORDB_RETRY_MAX_DELAY_MS`**: 重试最大延迟（毫秒）。
- **`VECTORDB_PREWARM_COUNT`**: 预热数量。
- **`VECTORDB_EF_SEARCH`**: 搜索效率。
- **`VECTORDB_BATCH_SIZE`**: 批处理大小。

## 系统提示词

这些变量会被注入到发送给 AI 的系统提示词（System Prompt）中，从而影响 AI 的行为和回复风格。您可以使用 `{{变量名}}` 的方式引用其他变量。

- **`TarSysPrompt`**: 核心系统提示词，包含时间、地点、天气等基本信息。
- **`TarEmojiPrompt`**: 指导 AI 如何使用表情包的提示词。
- **`TarEmojiList`**: 指定表情包列��文件名。

## 插件与工具

- **`VarToolList`**: 告诉 AI 当前可用的工具有哪些。通常指向一个包含工具列表的 `.txt` 文件，例如 `supertool.txt`。
- **`VarVCPGuide`**: 指导 AI 如何正确地格式化工具调用请求。
- **`VarDailyNoteGuide`**: 指导 AI 如何使用日记功能来记录长期记忆。
- **`VarFileTool`**: 专门为文件操作工具提供的说明。

## 自定义变量

这些变量允许您将各种动态信息和个人信息注入到系统提示词中。

- **`VarTimeNow`**: 当前时间的描述。
- **`VarSystemInfo`**: 您的系统信息。
- **`VarCity`**: 您所在的城市。
- **`VarUser`**: 您的用户描述。
- **`VarUserInfo`**: 您的用户信息。
- **`VarHome`**: 您的家庭描述。
- **`VarTeam`**: 您的团队描述。
- **`VarVchatPath`**: Vchat 客户端的根目录。
- **`VarDivRender`**: Vchat 客户端专用的 div 渲染提示词。
- **`VarRendering`**: Vchat 客户端渲染能力的提示词。
- **`VarAdaptiveBubbleTip`**: Vchat 客户端自适应气泡的实现指南。
- **`VarHttpUrl`**: 您的 VCP 服务可以通过 HTTP 访问的地址。
- **`VarHttpsUrl`**: 您的 VCP 服务可以通过 HTTPS 访问的地址。
- **`VarDdnsUrl`**: 您的 DDNS 地址。

## 模型专属指令

为不同的 AI 模型定制不同的行为。

- **`SarModel`**: 指定一个或多个模型 ID（用逗号分隔）。
- **`SarPrompt`**: 当检测到正在使用 `SarModel` 中指定的模型时，这条指令会被附加到系统提示词中。

## 插件 API 密钥

这里填写各个插件需要使用的第三方服务 API 密钥。

- **`WeatherKey`**: 和风天气 API 密钥。
- **`WeatherUrl`**: 和风天气 API 地址。
- **`TavilyKey`**: Tavily 搜索引擎 API 密钥。
- **`SILICONFLOW_API_KEY`**: 硅基流动 API 密钥。

## 文本替换

- **`Detector`**: 要查找的文本。
- **`Detector_Output`**: 用来替换的文本。
- **`SuperDetector`**: 对整个发送给模型的上下文（包括历史记录）进行文本替换。
- **`SuperDetector_Output`**: 用来替换的文本。

## 多模态配置

- **`MultiModalModel`**: 多模态数据识别模型。
- **`MultiModalPrompt`**: 多模态模型的提示词。
- **`MediaInsertPrompt`**: 多模态数据插入的提示词。
- **`MultiModalModelOutputMaxTokens`**: 多模态模型输出的最大 Token 数。
- **`MultiModalModelContent`**: 多模态模型处理内容的最大 Token 数。
- **`MultiModalModelThinkingBudget`**: 多模态模型思考预算。
- **`MultiModalModelAsynchronousLimit`**: 多模态模型异步请求上限。
- **`BILIBILI_COOKIE`**: Bilibili cookie，用于获取视频信息。
- **`BILIBILI_SUB_LANG`**: 返回 Bilibili 视频信息的语言类型。
