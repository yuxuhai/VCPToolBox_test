# 记忆系统指南

VCP ToolBox 拥有一个强大的记忆系统，它使 AI 能够超越单次对话的限制，实现真正的学习、反思和成长。这个系统的核心是基于 **RAG (Retrieval-Augmented Generation)** 技术的日记系统。

## 核心概念

### 1. 记忆的载体: 日记 (DailyNote)

AI 的记忆以“日记”的形式存在。每一篇日记都是一个结构化的文本，记录了 AI 在某次对话中学到的关键信息、得出的结论或重要的反思。

-   **主动记录**: AI 被设计为在对话中识别出有价值的信息，并主动调用 **[日记写入器](./plugins/DailyNote.md)** 来记录日记。
-   **结构化内容**: 每篇日记都包含署名、日期和正文，确保了信息的可追溯性。

### 2. 记忆的存储: 向量数据库

当一篇日记被创建后，系统会执行以下操作：

1.  **文本存储**: 日记的原始文本被保存为 Markdown 文件，存储在 `dailynote/` 目录下的对应文件夹中。
2.  **向量化 (Vectorization)**: 系统使用一个嵌入模型 (Embedding Model) 将日记的文���内容转换成一个数学向量（一长串数字）。这个向量可以被认为是日记内容在多维空间中的“坐标”。
3.  **向量索引**: 这个生成的向量和它所对应的日记文件的引用被一同存储在一个高效的向量数据库中。

### 3. 记忆的检索: RAG

当新的对话发生时，VCP 的记忆系统会利用 RAG 技术来检索相关的记忆：

1.  **查询向量化**: 系统会将当前用户的提问或对话的上下文也转换成一个向量。
2.  **相似度搜索**: 系统会在向量数据库中搜索与当前查询向量“最接近”的日记向量。这种“接近”代表了语义上的相似性。
3.  **上下文增强 (Augmentation)**: 系统会找到最相关的几篇日记，读取它们的原始内容，并将这些内容作为背景信息和上下文，一同注入到发送给 AI 的提示词中。

**结果**: AI 在回答用户问题时，不仅仅依赖于当前的对话，还能“回忆”起过去所有相关的知识和经验，从而给出更全面、更深入、更有逻辑的回答。

## 如何与记忆系统互动

作为用户，您可以通过与 AI 的自然对话来间接与记忆系统互动。

### 写入记忆

-   **进行有深度的对话**: 当您与 AI 讨论复杂话题、教授它新知识或共同完成一个任务时，AI 很可能会识别出这些有价值的信息并记录下来。
-   **直接命令 (可选)**: 您也可以直接命令 AI：“请把我们刚才讨论的重点记录到你的日记里。”

### 检索记忆

-   **提出相关问题**: 当您的问题与 AI 过去记录的某篇日记相关时，记忆系统会自动检索并使用它。例如，如果您之前和 AI 讨论过“项目A”，之后您再问“关于项目A，我们上次得出了什么结论？”，AI 就能够准确地回忆起来。
-   **使用关键词**: 提及与记忆相关的关键词、人名、项目名等，可以有效触发相关的记忆检索。

## 管理您的记忆库

所有的日记文件都以明文形式存储在 `dailynote/` 目录下。

-   **分类**: AI 可以通过在日记署名时使用 `[标签]` 的方式，将日记存入不同的子文件夹，实现知识的分类管理。例如，`[项目A]笔记` 会将日记存入 `dailynote/项目A/` 目录。
-   **共享**: 您可以创建一个 `[公共]` 标签，让不同的 Agent 共享同一个知识库。
-   **备份与迁移**: 您可以随时备份、编辑或迁移 `dailynote/` 目录下的所有文件，从而完全控制 AI 的记忆。

通过这个设计精妙的记忆系统，VCP ToolBox 中的 AI 不再是一个简单的对话机器人，而是一个能够不断学习和进化的智能伙伴。
