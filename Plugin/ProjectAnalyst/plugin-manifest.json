{
  "manifestVersion": "1.0.0",
  "name": "ProjectAnalyst",
  "version": "1.0.0",
  "displayName": "项目分析器",
  "description": "分析指定的项目文件夹，生成详细的分析报告，并支持后续查询分析结果。",
  "author": "Roo",
  "pluginType": "synchronous",
  "entryPoint": {
    "type": "nodejs",
    "command": "node ProjectAnalyst.js"
  },
  "communication": {
    "protocol": "stdio",
    "timeout": 30000
  },
  "configSchema": {},
  "capabilities": {
    "invocationCommands": [
      {
        "commandIdentifier": "AnalyzeProject",
        "description": "启动对一个本地项目文件夹的异步分析任务。\n参数:\n- directoryPath (字符串, 必需): 需要分析的项目的本地绝对路径。\n- fullAnalyze 或 full (布尔值, 可选, 默认: false): 是否执行完整的逐文件分析。如果为 false 或省略，则只进行快速分析，返回项目简介和文件树。两种参数键均可使用。\n调用成功后，会立即返回一个分析ID，后台将开始分析过程。你可以使用QueryAnalysis命令通过分析ID查询结果。\n调用格式 (快速分析):\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」AnalyzeProject「末」,\ndirectoryPath:「始」C:\\Path\\To\\Project「末」\n<<<[END_TOOL_REQUEST]>>>\n调用格式 (完整分析 - 使用 fullAnalyze):\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」AnalyzeProject「末」,\ndirectoryPath:「始」C:\\Path\\To\\Project「末」,\nfullAnalyze:「始」true「末」\n<<<[END_TOOL_REQUEST]>>>\n调用格式 (完整分析 - 使用 full):\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」AnalyzeProject「末」,\ndirectoryPath:「始」C:\\Path\\To\\Project「末」,\nfull:「始」true「末」\n<<<[END_TOOL_REQUEST]>>>",
        "example": "<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」AnalyzeProject「末」,\ndirectoryPath:「始」H:\\VCP\\VCPToolBox「末」,\nfull:「始」true「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "commandIdentifier": "QueryAnalysis",
        "description": "根据分析ID查询项目分析报告，支持多种查询模式。\n\n参数:\n- analysisId (字符串, 必需): 通过AnalyzeProject命令获取到的项目分析ID。\n- full (布尔值, 可选): 设为 true 时返回完整报告（可能非常长）。默认 false，仅返回项目简介和文件树。\n- filePath (字符串, 可选): 指定文件路径进行精确检索，返回该文件的分析内容。支持部分匹配。\n- keyword (字符串, 可选): 指定关键词进行全文检索，返回包含该关键词的上下文片段。\n\n查询模式（按优先级）:\n1. 文件检索模式：提供 filePath 参数时，搜索匹配的文件分析。\n2. 关键词检索模式：提供 keyword 参数时，进行全文关键词搜索。\n3. 完整查询模式：设置 full=true 时，返回完整报告。\n4. 简单查询模式（默认）：仅返回项目简介和文件树。\n\n调用示例:\n\n简单查询（默认）:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryAnalysis「末」,\nanalysisId:「始」MyProject-2025-10-05.17.52「末」\n<<<[END_TOOL_REQUEST]>>>\n\n完整查询:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryAnalysis「末」,\nanalysisId:「始」MyProject-2025-10-05.17.52「末」,\nfull:「始」true「末」\n<<<[END_TOOL_REQUEST]>>>\n\n文件检索:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryAnalysis「末」,\nanalysisId:「始」MyProject-2025-10-05.17.52「末」,\nfilePath:「始」src/main.js「末」\n<<<[END_TOOL_REQUEST]>>>\n\n关键词检索:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryAnalysis「末」,\nanalysisId:「始」MyProject-2025-10-05.17.52「末」,\nkeyword:「始」database「末」\n<<<[END_TOOL_REQUEST]>>>",
        "example": "<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryAnalysis「末」,\nanalysisId:「始」VCPToolBox-2025-11-10.12.55「末」,\nfilePath:「始」server.js「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "commandIdentifier": "QueryProgress",
        "description": "根据分析ID查询后台完整分析任务的当前进度。\n参数:\n- analysisId (字符串, 必需): 通过AnalyzeProject命令获取到的项目分析ID。\n此命令会读取任务的日志文件，并返回最近的日志条目以及任务的当前状态（进行中/已完成）。\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryProgress「末」,\nanalysisId:「始」MyProject-2025-10-05.17.52「末」\n<<<[END_TOOL_REQUEST]>>>",
        "example": "<<<[TOOL_REQUEST]>>>\ntool_name:「始」ProjectAnalyst「末」,\ncommand:「始」QueryProgress「末」,\nanalysisId:「始」VCPToolBox-2025-11-10.12.55「末」\n<<<[END_TOOL_REQUEST]>>>"
      }
    ]
  }
}