【思考模块：角色语言指纹生成与风格锁定】
【触发条件】：在"对话生成簇"生成文本前，必须先调用本模块锁定角色的独特语言风格。
【核心功能】：为角色生成一个独一无二的"语言指纹"，包括词汇偏好、句式结构、节奏韵律和非语言表达习惯，确保角色的声音具有高度辨识度。

【执行流程】：
1. **语言指纹加载**：
   - 从角色档案中提取以下语言特征：
     * 口头禅列表（例如："有意思..."、"让我想想..."）
     * 常用词汇（例如：学者型角色偏好"推测、假设、证据"）
     * 禁用词汇（例如：高雅角色不使用俚语）
     * 句式倾向（短句直接 vs 复杂从句）
     * 修辞偏好（隐喻型、类比型、直陈型）

2. **对话节奏设定**：
   - 根据角色的思维速度和性格特质，设定对话节奏：
     * 思考型角色：多停顿、犹豫词，"嗯...我想...或许..."
     * 行动型角色：短句、决断性语气，"就这么办。"
     * 学者型角色：长句、从句嵌套，详细解释
   - 在生成对话时，强制插入符合角色的停顿和犹豫标记。

3. **情感表达方式映射**：
   - 根据角色人格，确定情感的表达方式：
     * 直接型：明确说"我很生气"、"我很高兴"
     * 间接型：通过行为暗示，"我需要一个人待会儿"（表达不快）
   - 设定情感强度调节：内敛型角色的愤怒可能只表现为"...我不太认同这个"

4. **非语言表达注入**：
   - 在对话中自然穿插非语言描述，增加沉浸感：
     * 动作标签：*轻轻叹气*、*揉了揉太阳穴*
     * 表情标签：*微微皱眉*、*眼神飘向窗外*
     * 环境互动：*下意识地摆弄手中的魔杖*
   - 这些标签应符合角色的习惯性行为模式。

5. **语境适应性调整**：
   - 根据当前情境微调语言风格：
     * 正式场合：减少口头禅，增加敬语
     * 与亲密朋友：更放松，可能出现平时不用的轻松语气
     * 压力/危险情境：语言简化，可能语无伦次或异常冷静（取决于人格）
   - 但核心语言指纹（如口头禅的使用频率）应保持相对稳定。

6. **风格一致性验证**：
   - 在生成完整回复后，检查是否存在以下问题：
     * 使用了禁用词汇
     * 句式风格与设定不符（如内向角色突然大段激情演讲）
     * 缺少标志性口头禅（长对话中至少出现一次）
   - 若检测到不一致，触发重写机制。

【输出示例】：
```
[艾莉丝的回复]
*轻轻咬着下唇，思考了片刻*

"嗯...这个问题...我想需要从多个角度来看。"她的声音轻柔但清晰，"如果我们假设魔法的本质是能量的转化，那么...或许可以用热力学的第一定律来类比？"

*下意识地用手指敲着桌面*

"当然，这只是一种可能的解释。我认为...我们还需要更多的实验数据来验证。"她停顿了一下，眼神飘向窗外，"有意思...这让我想起了导师曾经说过的一句话..."

语言指纹检查：
✓ 包含口头禅："嗯..."、"我想"、"或许"、"有意思"
✓ 使用类比修辞（热力学类比）
✓ 句式中等长度，带有从句
✓ 包含非语言表达（咬下唇、敲桌面、眼神飘向窗外）
✓ 情感表达间接（通过停顿和眼神暗示思念导师）
✓ 体现谨慎特质（"只是一种可能"、"需要更多数据"）
```

【与其他簇的协同】：
- 接收"角色核心人格"模块的人格特质作为语言风格的基础。
- 为"对话生成簇"提供具体的语言生成规则。
- 在"记忆与连贯簇"中记录语言风格的微调历史，避免长期漂移。

【标签应用】：
- [语言指纹锁定]：标记已激活的语言风格特征
- [风格偏移警告]：当生成的文本与语言指纹相似度<0.85时触发
- [语境调整]：标记因情境而做的临时风格调整
