# VCP 日记系统 - 5分钟快速入门

> 🚀 快速掌握 VCP 日记系统的核心功能

## 📋 目录

- [一、30秒了解日记系统](#一30秒了解日记系统)
- [二、2分钟配置启用](#二2分钟配置启用)
- [三、写入你的第一条日记](#三写入你的第一条日记)
- [四、检索和使用记忆](#四检索和使用记忆)
- [五、常用场景速查](#五常用场景速查)
- [六、下一步学习](#六下一步学习)

---

## 一、30秒了解日记系统

### 🎯 它是什么？

VCP 日记系统 = **AI的长期记忆大脑**

- 📝 记录：AI 自动记录对话、学习、思考
- 🔍 检索：智能检索相关记忆片段
- 🧠 进化：通过记忆实现能力迭代

### ⚡ 核心特性（一句话）

| 特性 | 一句话说明 |
|------|-----------|
| **HNSW向量检索** | 百万级数据毫秒级查询 |
| **时间感知** | "上周我们聊了什么？"精准定位 |
| **分层管理** | 私人记忆/公共知识/专业领域自动分类 |
| **自动整理** | AI自主融合、去重、精炼日记 |
| **四种检索模式** | 从全文到片段，灵活适配场景 |

---

## 二、2分钟配置启用

### Step 1: 添加配置变量（30秒）

在 `config.env` 中添加（如已存在则跳过）：

```bash
# 日记功能指导
VarDailyNoteGuide='本客户端已经搭载长期记忆功能，你可以在聊天一段时间后，通过在回复的末尾添加如下结构化内容来创建日记...'
```

> 💡 完整配置示例在 `config.env.example` 的第164行

### Step 2: 在系统提示词中启用（1分钟）

编辑你的 Agent 配置文件（如 `Agent/Nova.txt`），添加：

```plaintext
Nova的日记本:[[Nova日记本::Time::Rerank]]
公共日记本:[[公共日记本::Time::Group]]

————————以上是过往记忆区————————

额外指令:{{VarDailyNoteGuide}}
```

### Step 3: 重启服务器（30秒）

```bash
# 如果使用 PM2
pm2 restart server

# 或直接重启
node server.js
```

✅ **完成！日记系统已启用。**

---

## 三、写入你的第一条日记

### 方法1：自动日记标记（最简单）⭐

AI 在回复末尾添加：

```markdown
<<<DailyNoteStart>>>
Maid: Nova
Date: 2025.10.13
Content:
今天第一次使用VCP日记系统。
学习了如何通过日记标记来创建长期记忆。
下次要尝试使用时间感知检索功能。
<<<DailyNoteEnd>>>
```

**效果**：
- ✅ 自动保存到 `dailynote/Nova/2025.10.13-HH_MM_SS.txt`
- ✅ 自动向量化索引（5分钟内）
- ✅ 可立即通过 `[[Nova日记本]]` 检索

### 方法2：工具调用（精确控制）

```
<<<[TOOL_REQUEST]>>>
tool_name:「始」DailyNoteWrite「末」,
maid:「始」Nova「末」,
date:「始」2025.10.13「末」,
content:「始」
今天学习了VCP日记系统的基础用法。
关键收获：日记是AI能力进化的核心。
「末」
<<<[END_TOOL_REQUEST]>>>
```

### 💡 进阶：使用 [Tag] 分类

```markdown
<<<DailyNoteStart>>>
Maid: [公共]Nova        ← 写入公共知识库
Date: 2025.10.13
Content:
VCP日记系统快速入门要点...
<<<DailyNoteEnd>>>
```

**其他Tag示例**：
- `[VCP开发]Nova` → 存入专业知识库
- `[学习笔记]Nova` → 存入学习分类
- `Nova` → 存入私人日记（默认）

---

## 四、检索和使用记忆

### 🔍 四种基础检索模式

#### 1. 全文注入（完整回顾）
```
{{Nova日记本}}
```
- 注入所有日记
- 适合：总结回顾

#### 2. RAG片段检索（日常推荐）⭐
```
[[Nova日记本]]
```
- 根据对话检索相关片段
- 适合：日常对话

#### 3. 条件全文（智能判断）
```
<<Nova日记本>>
```
- 相似度达标才注入全文
- 适合：不确定是否相关

#### 4. 条件RAG（大型库推荐）⭐
```
《《Nova日记本》》
```
- 相似度达标才检索片段
- 适合：海量日记

### ⚡ 三大高级检索模式

#### 🕐 时间感知检索
```
[[Nova日记本::Time]]
```

**示例对话**：
```
用户："我们上周讨论了什么？"
系统：激活时间感知 → 定位上周 → 检索相关内容
```

**支持表达式**：
- 最近、上周、上个月
- 昨天、今天、前天
- 三天前、一周前

#### 🕸️ 语义组增强
```
[[Nova日记本::Group]]
```

当命中预定义的"词元组"时，融合组向量增强检索精度。

**配置示例**（管理面板）：
```json
{
  "VCP开发": ["插件", "向量检索", "RAG"],
  "AI模型": ["GPT", "Claude", "Gemini"]
}
```

#### 🎖️ Rerank精排
```
[[Nova日记本::Rerank]]
```

使用专门模型进行二次排序，最高精度。

### 🎨 组合使用（最强模式）
```
[[Nova日记本::Time::Group::Rerank:1.5]]
```

- 时间过滤 + 语义增强 + 精准排序
- K值×1.5获取更多结果

---

## 五、常用场景速查

### 场景1：日常对话记忆辅助

**系统提示词**：
```
Nova的日记本:[[Nova日记本::Time]]
```

**效果**：
- AI 自动检索相关历史记忆
- 提供连贯的对话体验
- 不会遗忘重要信息

### 场景2：学习知识积累

**写入**：
```markdown
<<<DailyNoteStart>>>
Maid: [学习]Nova
Date: 2025.10.13
Content:
今天学习了Transformer架构。
核心：自注意力机制 = Q×K×V
应用：BERT双向、GPT单向
待深入：为什么Pre-LN效果更好？
<<<DailyNoteEnd>>>
```

**检索**：
```
[[学习日记本::Group::Rerank]]
```

### 场景3：多Agent协作知识共享

**Agent A 写入**：
```
Maid: [公共]AgentA
Content: Python异步编程最佳实践...
```

**Agent B 检索**：
```
[[公共日记本::Group]]
```

### 场景4：专业领域知识库

**建立知识库**：
```
dailynote/
└── VCP开发/
    ├── 插件开发手册.txt
    ├── API参考.txt
    └── 架构设计.txt
```

**使用**：
```
系统提示词中添加：
<<VCP开发日记本>>  ← 条件注入，需要时才加载
```

### 场景5：批量整理日记

使用 `DailyNoteManager` 工具：

```
<<<[TOOL_REQUEST]>>>
tool_name:「始」DailyNoteManager「末」,
command:「始」
2025.10.13.txt
2025.10.13-Nova
今天学了A知识，明白了X原理。

2025.10.13.2.txt
2025.10.13-Nova
晚上又学了B知识，理解了Y概念。
「末」
<<<[END_TOOL_REQUEST]>>>
```

**自动处理**：
- 融合同日期日记
- 去除重复信息
- 优化内容结构
- 标准化输出

---

## 六、下一步学习

### 📚 深入学习资源

#### 1. **完整用户指南** ⭐
[DailyNote_User_Guide.md](./DailyNote_User_Guide.md)

学习内容：
- ✅ 日记写作最佳实践
- ✅ 所有检索模式详解
- ✅ VCP元思考系统
- ✅ 三大自学习系统
- ✅ 常见问题排查

#### 2. **开发者文档**
[DailyNote_Developer_Guide.md](./DailyNote_Developer_Guide.md)

学习内容：
- 🔧 插件开发
- 🏗️ 架构设计
- 🔌 API接口
- 🧪 测试与调试

#### 3. **VCP主文档**
[README.md](../README.md)

了解 VCP 的完整生态。

### 🎯 进阶技能清单

学完快速入门后，逐步掌握：

- [ ] 配置语义组（管理面板）
- [ ] 使用Rerank精排（提高检索精度）
- [ ] 建立专业知识库
- [ ] 使用DailyNoteEditor编辑历史
- [ ] 配置定时备份
- [ ] 监控系统性能
- [ ] 自定义思维簇

### 💡 实践建议

#### 第1周：基础使用
- ✅ 每天写3-5条日记
- ✅ 熟悉4种检索模式
- ✅ 建立个人分类体系

#### 第2周：高级功能
- ✅ 启用时间感知检索
- ✅ 配置语义组
- ✅ 尝试Rerank精排

#### 第3周：进化优化
- ✅ 批量整理历史日记
- ✅ 建立专业知识库
- ✅ 优化日记写作质量

#### 第4周：精通掌握
- ✅ 自定义思维簇
- ✅ 多Agent协作
- ✅ 性能监控与优化

---

## 🎓 核心概念速记卡

### 日记写入
```
最简单：在回复末尾 <<<DailyNoteStart>>> ... <<<DailyNoteEnd>>>
工具调用：DailyNoteWrite
批量整理：DailyNoteManager
```

### 分类存储
```
私人：      Nova
公共：      [公共]Nova
专业：      [领域名]Nova
```

### 检索模式
```
全文：      {{日记本}}
RAG片段：   [[日记本]]
条件全文：  <<日记本>>
条件RAG：   《《日记本》》
```

### 高级检索
```
时间感知：  ::Time
语义增强：  ::Group
精准排序：  ::Rerank
调整K值：   :1.5
```

### 组合示例
```
最强检索：[[日记本::Time::Group::Rerank:1.5]]
日常推荐：[[日记本::Time]]
专业查询：[[日记本::Group::Rerank]]
```

---

## ❓ 快速问答

### Q: 日记多久会被向量化？
**A**: 5分钟内自动完成，无需手动触发。

### Q: 如何确认日记写入成功？
**A**: 检查 `dailynote/[角色名]/` 目录是否有新文件。

### Q: 检索不到日记怎么办？
**A**: 
1. 等待5分钟向量化
2. 检查文件格式（必须.txt或.md）
3. 尝试降低相似度阈值

### Q: 如何删除日记？
**A**: 直接删除 `dailynote/` 下的文件，或使用 `FileOperator` 插件。

### Q: 能否导出日记？
**A**: 日记就是纯文本文件，可直接复制或打包 `dailynote/` 目录。

---

## 🚀 现在开始使用

1. ✅ 确认配置已完成
2. ✅ 重启VCP服务器
3. ✅ 写入第一条日记
4. ✅ 等待5分钟
5. ✅ 尝试检索记忆

**恭喜！你已掌握VCP日记系统的核心用法！** 🎉

---

## 📞 获取帮助

- 📖 [完整用户指南](./DailyNote_User_Guide.md)
- 🔧 [开发者文档](./DailyNote_Developer_Guide.md)
- 💬 [GitHub Issues](https://github.com/lioensky/VCPToolBox/issues)
- 🌐 [VCP主页](../README.md)

---

<div align="center">

**🌟 5分钟入门，终生受益！**

让你的AI拥有真正的长期记忆 | VCP ToolBox

[返回顶部](#vcp-日记系统---5分钟快速入门)

</div>
